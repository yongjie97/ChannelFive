{"ast":null,"code":"import { useVuelidate } from '@vuelidate/core';\nimport { required, minLength, maxLength, numeric } from '@vuelidate/validators';\nexport default {\n  name: 'Profile',\n  setup() {\n    return {\n      v$: useVuelidate()\n    };\n  },\n  data() {\n    return {\n      email: '',\n      displayName: '',\n      zipCode: '',\n      successMessage: null,\n      failMessage: null\n    };\n  },\n  validations: {\n    displayName: {\n      required\n    },\n    zipCode: {\n      required,\n      numeric,\n      minLength: minLength(6),\n      maxLength: maxLength(6)\n    }\n  },\n  mounted() {\n    axios({\n      method: 'get',\n      url: \"http://localhost:8080/profile/retrieve\",\n      withCredentials: true\n    }).then(response => {\n      if (response != null) {\n        this.email = response.data.data.email;\n        this.displayName = response.data.data.displayName;\n        this.zipCode = response.data.data.zipCode;\n      }\n    }).catch(error => {\n      this.failMessage = \"Opps! Something went wrong. Please try again later.\";\n      this.successMessage = null;\n    });\n  },\n  methods: {\n    submit: function (e) {\n      this.v$.$validate();\n      if (!this.v$.$error) {\n        var profileForm = new FormData();\n        profileForm.append('displayName', this.displayName);\n        profileForm.append('zipCode', this.zipCode);\n        axios({\n          method: 'post',\n          url: \"http://localhost:8080/profile/update\",\n          data: profileForm,\n          headers: {\n            \"Content-Type\": \"multipart/form-data\"\n          },\n          withCredentials: true\n        }).then(res => {\n          if (res.data.success) {\n            this.successMessage = res.data.message;\n            this.failMessage = null;\n          } else {\n            this.failMessage = res.data.message;\n            this.successMessage = null;\n          }\n        }).catch(error => {\n          this.failMessage = \"Opps! Something went wrong. Please try again later.\";\n          this.successMessage = null;\n        });\n      }\n    }\n  }\n};","map":{"version":3,"mappings":"AAsDI,SAASA,YAAW,QAAS,iBAAgB;AAC7C,SAASC,QAAQ,EAAEC,SAAS,EAAEC,SAAS,EAAEC,OAAM,QAAS,uBAAsB;AAE9E,eAAe;EACXC,IAAI,EAAE,SAAS;EACfC,KAAI,GAAK;IACL,OAAO;MAAEC,EAAE,EAAEP,YAAY;IAAG;EAChC,CAAC;EACDQ,IAAI,GAAG;IACH,OAAO;MACHC,KAAK,EAAE,EAAE;MACTC,WAAW,EAAE,EAAE;MACfC,OAAO,EAAE,EAAE;MACXC,cAAc,EAAE,IAAI;MACpBC,WAAW,EAAE;IACjB;EACJ,CAAC;EACDC,WAAW,EAAE;IACTJ,WAAW,EAAE;MACXT;IACF,CAAC;IACDU,OAAO,EAAE;MACPV,QAAQ;MACRG,OAAO;MACPF,SAAS,EAAEA,SAAS,CAAC,CAAC,CAAC;MACvBC,SAAS,EAAEA,SAAS,CAAC,CAAC;IACxB;EACJ,CAAC;EACDY,OAAO,GAAG;IACNC,KAAK,CAAC;MAACC,MAAM,EAAC,KAAK;MACXC,GAAG,EAAE,wCAAwC;MAC7CC,eAAe,EAAE;IACzB,CAAC,EACAC,IAAI,CAACC,QAAO,IAAK;MACd,IAAIA,QAAO,IAAK,IAAI,EAAE;QAClB,IAAI,CAACZ,KAAI,GAAIY,QAAQ,CAACb,IAAI,CAACA,IAAI,CAACC,KAAI;QACpC,IAAI,CAACC,WAAU,GAAIW,QAAQ,CAACb,IAAI,CAACA,IAAI,CAACE,WAAU;QAChD,IAAI,CAACC,OAAM,GAAIU,QAAQ,CAACb,IAAI,CAACA,IAAI,CAACG,OAAM;MAC5C;IACJ,CAAC,CAAC,CAACW,KAAK,CAAEC,KAAK,IAAK;MAChB,IAAI,CAACV,WAAU,GAAI,qDAAoD;MACvE,IAAI,CAACD,cAAa,GAAI,IAAG;IAC7B,CAAC;EACL,CAAC;EACDY,OAAO,EAAE;IACLC,MAAM,EAAE,UAASC,CAAC,EAAE;MAChB,IAAI,CAACnB,EAAE,CAACoB,SAAS,EAAC;MAClB,IAAI,CAAC,IAAI,CAACpB,EAAE,CAACqB,MAAM,EAAE;QACjB,IAAIC,WAAU,GAAI,IAAIC,QAAQ,EAAE;QAChCD,WAAW,CAACE,MAAM,CAAC,aAAa,EAAE,IAAI,CAACrB,WAAW,CAAC;QACnDmB,WAAW,CAACE,MAAM,CAAC,SAAS,EAAE,IAAI,CAACpB,OAAO,CAAC;QAC3CK,KAAK,CAAC;UAAEC,MAAM,EAAC,MAAM;UACjBC,GAAG,EAAE,sCAAsC;UAC3CV,IAAI,EAAEqB,WAAW;UACjBG,OAAO,EAAE;YAAC,cAAc,EAAC;UAAqB,CAAC;UAC/Cb,eAAe,EAAE;QACrB,CAAC,CAAC,CAACC,IAAI,CAAEa,GAAG,IAAK;UACf,IAAIA,GAAG,CAACzB,IAAI,CAAC0B,OAAO,EAAE;YAClB,IAAI,CAACtB,cAAa,GAAIqB,GAAG,CAACzB,IAAI,CAAC2B,OAAM;YACrC,IAAI,CAACtB,WAAU,GAAI,IAAG;UAC1B,OAAO;YACH,IAAI,CAACA,WAAU,GAAIoB,GAAG,CAACzB,IAAI,CAAC2B,OAAM;YAClC,IAAI,CAACvB,cAAa,GAAI,IAAG;UAC7B;QACF,CAAC,CAAC,CAACU,KAAK,CAAEC,KAAK,IAAK;UAChB,IAAI,CAACV,WAAU,GAAI,qDAAoD;UACvE,IAAI,CAACD,cAAa,GAAI,IAAG;QAC7B,CAAC;MACL;IACJ;EACJ;AACJ","names":["useVuelidate","required","minLength","maxLength","numeric","name","setup","v$","data","email","displayName","zipCode","successMessage","failMessage","validations","mounted","axios","method","url","withCredentials","then","response","catch","error","methods","submit","e","$validate","$error","profileForm","FormData","append","headers","res","success","message"],"sourceRoot":"","sources":["/Users/yj/Documents/test-project/src/views/account/Profile.vue"],"sourcesContent":["<template>\n    <section class=\"vh-120\" style=\"background-color: #E0E0E0;\">\n        <div class=\"container py-5 h-100\">\n        <div class=\"row d-flex justify-content-center h-100\">\n            <div class=\"col col-xl-7\">\n            <div class=\"card\">\n                <div class=\"row\">\n                <div class=\"d-flex\">\n                    <div class=\"card-body p-4 p-lg-5 text-black\">\n                    <form id=\"profileForm\" @submit.prevent=\"submit\">    \n                        <h4 class=\"fw-normal mb-4 \"><strong>My Profile</strong></h4>\n\n                        <div class=\"form-outline mb-4\">\n                          <p style=\"white-space: pre-line\" class=\"fw-normal mb-3 alert alert-success\" v-if=\"successMessage\">{{ successMessage }}</p>\n                          <p style=\"white-space: pre-line\" class=\"fw-normal mb-3 alert alert-danger\" v-if=\"failMessage\">{{ failMessage }}</p>   \n                        </div>\n\n                        <div class=\"form-outline mb-4\">\n                                <label class=\"form-label\" for=\"email\">Email address</label>\n                                <input type=\"email\" id=\"email\" v-model=\"email\" name=\"email\" class=\"form-control form-control-lg\" :class=\"{ 'border-danger': v$.email.$error }\" disabled />\n                                <div class=\"form-label text-danger\" v-if=\"v$.email.$error\">Please enter a valid email</div>\n                            </div>\n          \n                            <div class=\"form-outline mb-4\">\n                                <label class=\"form-label\" for=\"displayName\">Display Name</label>\n                                <input type=\"text\" id=\"displayName\" v-model=\"displayName\" name=\"displayName\" class=\"form-control form-control-lg\" :class=\"{ 'border-danger': v$.displayName.$error }\" />\n                                <div class=\"form-label text-danger\" v-if=\"v$.displayName.$error\">Please enter a display name</div>\n                            </div>\n    \n                            <div class=\"form-outline mb-4\">\n                                <label class=\"form-label\" for=\"zipCode\">Zip Code</label>\n                                <input type=\"text\" id=\"zipCode\" v-model=\"zipCode\" name=\"zipCode\" class=\"form-control form-control-lg\" :class=\"{ 'border-danger': v$.zipCode.$error }\" />\n                                <div class=\"form-label text-danger\" v-if=\"v$.zipCode.$error\">Please enter valid zip code</div>\n                            </div>\n                        <div class=\"form-outline mb-4\">\n                            <a class=\"text-dark\" href=\"/profile/password\">Change Password</a>\n                        </div>\n                        <div class=\"pt-3\">\n                            <input class=\"btn btn-warning text-white btn-lg btn-block\" type=\"submit\" value=\"Save Profile\" />\n                        </div>\n                    </form>\n\n                    </div>\n                </div>\n                </div>\n            </div>\n            </div>\n        </div>\n        </div>\n    </section>\n</template>\n    \n<script>\n\n    import { useVuelidate } from '@vuelidate/core'\n    import { required, minLength, maxLength, numeric } from '@vuelidate/validators'\n\n    export default {\n        name: 'Profile',\n        setup () {\n            return { v$: useVuelidate() }\n        },\n        data() {\n            return {\n                email: '',\n                displayName: '',\n                zipCode: '',\n                successMessage: null,\n                failMessage: null,\n            }\n        },\n        validations: {\n            displayName: {\n              required\n            },\n            zipCode: {\n              required,\n              numeric,\n              minLength: minLength(6),\n              maxLength: maxLength(6)\n            }\n        },\n        mounted() {\n            axios({method:'get', \n                    url: \"http://localhost:8080/profile/retrieve\", \n                    withCredentials: true\n            })\n            .then(response => {\n                if (response != null) {\n                    this.email = response.data.data.email\n                    this.displayName = response.data.data.displayName\n                    this.zipCode = response.data.data.zipCode\n                }\n            }).catch((error) => {\n                this.failMessage = \"Opps! Something went wrong. Please try again later.\"\n                this.successMessage = null\n            })\n        },\n        methods: {\n            submit: function(e) {\n                this.v$.$validate()\n                if (!this.v$.$error) {\n                    var profileForm = new FormData();\n                    profileForm.append('displayName', this.displayName);\n                    profileForm.append('zipCode', this.zipCode);\n                    axios({ method:'post', \n                        url: \"http://localhost:8080/profile/update\", \n                        data: profileForm, \n                        headers: {\"Content-Type\":\"multipart/form-data\"},\n                        withCredentials: true\n                    }).then((res) => {\n                      if (res.data.success) {\n                          this.successMessage = res.data.message\n                          this.failMessage = null\n                      } else {\n                          this.failMessage = res.data.message\n                          this.successMessage = null\n                      }\n                    }).catch((error) => {\n                        this.failMessage = \"Opps! Something went wrong. Please try again later.\"\n                        this.successMessage = null\n                    })\n                }\n            }\n        }\n    }\n</script>"]},"metadata":{},"sourceType":"module"}