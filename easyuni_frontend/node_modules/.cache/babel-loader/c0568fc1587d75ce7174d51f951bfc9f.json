{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, normalizeClass as _normalizeClass, withDirectives as _withDirectives, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"vh-100\",\n  style: {\n    \"background-color\": \"#E0E0E0\"\n  }\n};\nconst _hoisted_2 = {\n  class: \"container py-5 h-100\"\n};\nconst _hoisted_3 = {\n  class: \"row d-flex justify-content-center h-100\"\n};\nconst _hoisted_4 = {\n  class: \"col col-xl-7\"\n};\nconst _hoisted_5 = {\n  class: \"card\"\n};\nconst _hoisted_6 = {\n  class: \"row\"\n};\nconst _hoisted_7 = {\n  class: \"d-flex\"\n};\nconst _hoisted_8 = {\n  class: \"card-body p-4 p-lg-5 text-black\"\n};\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"h4\", {\n  class: \"fw-normal mb-4\"\n}, [/*#__PURE__*/_createElementVNode(\"strong\", null, \"Change Password\")], -1 /* HOISTED */);\nconst _hoisted_10 = {\n  key: 0,\n  class: \"fw-normal mb-3 alert alert-success\"\n};\nconst _hoisted_11 = {\n  key: 1,\n  class: \"fw-normal mb-3 alert alert-danger\"\n};\nconst _hoisted_12 = {\n  class: \"form-outline mb-4\"\n};\nconst _hoisted_13 = /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"form-label\",\n  for: \"oldPassword\"\n}, \"Old Password\", -1 /* HOISTED */);\nconst _hoisted_14 = {\n  key: 0,\n  class: \"form-label text-danger\"\n};\nconst _hoisted_15 = {\n  class: \"form-outline mb-4\"\n};\nconst _hoisted_16 = /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"form-label\",\n  for: \"newPassword\"\n}, \"New Password\", -1 /* HOISTED */);\nconst _hoisted_17 = {\n  key: 0,\n  class: \"form-label text-danger\"\n};\nconst _hoisted_18 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"pt-3\"\n}, [/*#__PURE__*/_createElementVNode(\"input\", {\n  class: \"btn btn-warning text-white btn-lg btn-block\",\n  type: \"submit\",\n  value: \"Change Password\"\n})], -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"section\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"form\", {\n    id: \"profileForm\",\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.submit && $options.submit(...args), [\"prevent\"]))\n  }, [_hoisted_9, $data.successMessage ? (_openBlock(), _createElementBlock(\"p\", _hoisted_10, _toDisplayString($data.successMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), $data.failMessage ? (_openBlock(), _createElementBlock(\"p\", _hoisted_11, _toDisplayString($data.failMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_12, [_hoisted_13, _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    id: \"oldPassword\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.oldPassword = $event),\n    name: \"oldPassword\",\n    class: _normalizeClass([\"form-control form-control-lg\", {\n      'border-danger': $setup.v$.oldPassword.$error\n    }])\n  }, null, 2 /* CLASS */), [[_vModelText, $data.oldPassword]]), $setup.v$.oldPassword.$error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, \"Please enter your old password\")) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_15, [_hoisted_16, _withDirectives(_createElementVNode(\"input\", {\n    type: \"password\",\n    id: \"newPassword\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.newPassword = $event),\n    name: \"newPassword\",\n    class: _normalizeClass([\"form-control form-control-lg\", {\n      'border-danger': $setup.v$.newPassword.$error\n    }])\n  }, null, 2 /* CLASS */), [[_vModelText, $data.newPassword]]), $setup.v$.newPassword.$error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_17, \"Please enter a new password\")) : _createCommentVNode(\"v-if\", true)]), _hoisted_18], 32 /* HYDRATE_EVENTS */)])])])])])])])]);\n}","map":{"version":3,"mappings":";;EACqBA,KAAK,EAAC,QAAQ;EAACC,KAAkC,EAAlC;IAAA;EAAA;;;EACnBD,KAAK,EAAC;AAAsB;;EAC5BA,KAAK,EAAC;AAAyC;;EAC3CA,KAAK,EAAC;AAAc;;EACpBA,KAAK,EAAC;AAAM;;EACRA,KAAK,EAAC;AAAK;;EACXA,KAAK,EAAC;AAAQ;;EACVA,KAAK,EAAC;AAAiC;gCAExCE,oBAAiE;EAA7DF,KAAK,EAAC;AAAiB,iBAACE,oBAAgC,gBAAxB,iBAAe;;;EAChDF,KAAK,EAAC;;;;EACNA,KAAK,EAAC;;;EAEJA,KAAK,EAAC;AAAmB;iCAC1BE,oBAAgE;EAAzDF,KAAK,EAAC,YAAY;EAACG,GAAG,EAAC;GAAc,cAAY;;;EAEnDH,KAAK,EAAC;;;EAGVA,KAAK,EAAC;AAAmB;iCAC1BE,oBAAgE;EAAzDF,KAAK,EAAC,YAAY;EAACG,GAAG,EAAC;GAAc,cAAY;;;EAEnDH,KAAK,EAAC;;iCAGfE,oBAEM;EAFDF,KAAK,EAAC;AAAM,iBACbE,oBAAmG;EAA5FF,KAAK,EAAC,6CAA6C;EAACI,IAAI,EAAC,QAAQ;EAACC,KAAK,EAAC;;;;uBA1BnGC,oBAqCM,WArCNC,UAqCM,GApCNL,oBAmCM,OAnCNM,UAmCM,GAlCNN,oBAiCM,OAjCNO,UAiCM,GAhCFP,oBA+BM,OA/BNQ,UA+BM,GA9BNR,oBA6BM,OA7BNS,UA6BM,GA5BFT,oBA2BM,OA3BNU,UA2BM,GA1BNV,oBAyBM,OAzBNW,UAyBM,GAxBFX,oBAuBM,OAvBNY,UAuBM,GAtBNZ,oBAoBO;IApBDa,EAAE,EAAC,aAAa;IAAEC,QAAM,wDAAUC,2CAAM;MAC1CC,UAAiE,EACbC,oBAAc,kBAAlEb,oBAA4F,KAA5Fc,WAA4F,mBAArBD,oBAAc,uDAClCA,iBAAW,kBAA9Db,oBAAqF,KAArFe,WAAqF,mBAAlBF,iBAAW,uDAE9EjB,oBAIM,OAJNoB,WAIM,GAHFC,WAAgE,kBAChErB,oBAA4K;IAArKE,IAAI,EAAC,UAAU;IAACW,EAAE,EAAC,aAAa;+DAAUI,iBAAW;IAAEK,IAAI,EAAC,aAAa;IAACxB,KAAK,mBAAC,8BAA8B;MAAA,iBAA4ByB,SAAE,CAACC,WAAW,CAACC;IAAM;0CAArHR,iBAAW,KAClBM,SAAE,CAACC,WAAW,CAACC,MAAM,kBAA/DrB,oBAAqG,OAArGsB,WAAqG,EAApC,gCAA8B,0CAGnG1B,oBAIM,OAJN2B,WAIM,GAHFC,WAAgE,kBAChE5B,oBAA4K;IAArKE,IAAI,EAAC,UAAU;IAACW,EAAE,EAAC,aAAa;+DAAUI,iBAAW;IAAEK,IAAI,EAAC,aAAa;IAACxB,KAAK,mBAAC,8BAA8B;MAAA,iBAA4ByB,SAAE,CAACM,WAAW,CAACJ;IAAM;0CAArHR,iBAAW,KAClBM,SAAE,CAACM,WAAW,CAACJ,MAAM,kBAA/DrB,oBAAkG,OAAlG0B,WAAkG,EAAjC,6BAA2B,0CAGhGC,WAEM","names":["class","style","_createElementVNode","for","type","value","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","id","onSubmit","$options","_hoisted_9","$data","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","name","$setup","oldPassword","$error","_hoisted_14","_hoisted_15","_hoisted_16","newPassword","_hoisted_17","_hoisted_18"],"sourceRoot":"","sources":["/Users/yj/Documents/test-project/src/views/account/ChangePassword.vue"],"sourcesContent":["<template>\n            <section class=\"vh-100\" style=\"background-color: #E0E0E0;\">\n            <div class=\"container py-5 h-100\">\n            <div class=\"row d-flex justify-content-center h-100\">\n                <div class=\"col col-xl-7\">\n                <div class=\"card\">\n                    <div class=\"row\">\n                    <div class=\"d-flex\">\n                        <div class=\"card-body p-4 p-lg-5 text-black\">\n                        <form id=\"profileForm\" @submit.prevent=\"submit\">    \n                            <h4 class=\"fw-normal mb-4 \"><strong>Change Password</strong></h4>     \n                            <p class=\"fw-normal mb-3 alert alert-success\" v-if=\"successMessage\">{{ successMessage }}</p>\n                            <p class=\"fw-normal mb-3 alert alert-danger\" v-if=\"failMessage\">{{ failMessage }}</p>\n          \n                            <div class=\"form-outline mb-4\">\n                                <label class=\"form-label\" for=\"oldPassword\">Old Password</label>\n                                <input type=\"password\" id=\"oldPassword\" v-model=\"oldPassword\" name=\"oldPassword\" class=\"form-control form-control-lg\" :class=\"{ 'border-danger': v$.oldPassword.$error }\" />\n                                <div class=\"form-label text-danger\" v-if=\"v$.oldPassword.$error\">Please enter your old password</div>\n                            </div>   \n\n                            <div class=\"form-outline mb-4\">\n                                <label class=\"form-label\" for=\"newPassword\">New Password</label>\n                                <input type=\"password\" id=\"newPassword\" v-model=\"newPassword\" name=\"newPassword\" class=\"form-control form-control-lg\" :class=\"{ 'border-danger': v$.newPassword.$error }\" />\n                                <div class=\"form-label text-danger\" v-if=\"v$.newPassword.$error\">Please enter a new password</div>\n                            </div> \n\n                            <div class=\"pt-3\">\n                                <input class=\"btn btn-warning text-white btn-lg btn-block\" type=\"submit\" value=\"Change Password\" />\n                            </div>\n                        </form>\n        \n                        </div>\n                    </div>\n                    </div>\n                </div>\n                </div>\n            </div>\n            </div>\n        </section>\n</template>\n      \n<script>    \n    import { useVuelidate } from '@vuelidate/core'\n    import { required } from '@vuelidate/validators'\n\n    export default {\n        name: 'ChangePassword',\n        setup () {\n            return { v$: useVuelidate() }\n        },\n        data() {\n            return {\n                oldPassword: '',\n                newPassword: '',\n                successMessage: null,\n                failMessage: null,\n            }\n        },\n        validations: {\n            oldPassword: {\n              required\n            },\n            newPassword: {\n              required\n            }\n        },\n        mounted() {\n            axios({method:'get', \n                    url: \"http://localhost:8080/profile/retrieve\", \n                    withCredentials: true\n            })\n            .then(response => {\n                if (response != null) {\n                    this.email = response.data.data.email\n                    this.displayName = response.data.data.displayName\n                    this.zipCode = response.data.data.zipCode\n                }\n            }).catch((error) => {\n                this.failMessage = \"Opps! Something went wrong. Please try again later.\"\n                this.successMessage = null\n            })\n        },\n        methods: {\n            submit: function(e) {\n                this.v$.$validate()\n                if (!this.v$.$error) {\n                    var passwordForm = new FormData();\n                    passwordForm.append('oldPassword', this.oldPassword);\n                    passwordForm.append('newPassword', this.newPassword);\n                    axios({ method:'post', \n                        url: \"http://localhost:8080/profile/password\", \n                        data: passwordForm, \n                        headers: {\"Content-Type\":\"multipart/form-data\"},\n                        withCredentials: true\n                    }).then((res) => {\n                      if (res.data.success) {\n                          this.successMessage = res.data.message\n                          this.failMessage = null\n                          this.$router.push('/profile') \n                      } else {\n                          this.failMessage = res.data.message\n                          this.successMessage = null\n                      }\n                    }).catch((error) => {\n                        this.failMessage = \"Opps! Something went wrong. Please try again later.\"\n                        this.successMessage = null\n                    })\n                }\n            }\n        }\n    }\n</script>\n"]},"metadata":{},"sourceType":"module"}